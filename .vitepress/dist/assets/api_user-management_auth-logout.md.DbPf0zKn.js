import{_ as p,I as o,c as e,o as t,j as n,J as r,aj as c,a}from"./chunks/framework.e3UxQEvm.js";const E=JSON.parse('{"title":"ç”¨æˆ·ç™»å‡º","description":"","frontmatter":{},"headers":[],"relativePath":"api/user-management/auth-logout.md","filePath":"api/user-management/auth-logout.md","lastUpdated":0}'),F={name:"api/user-management/auth-logout.md"};function i(D,s,y,u,b,A){const l=o("ApiEndpoint");return t(),e("div",null,[s[0]||(s[0]=n("h1",{id:"ç”¨æˆ·ç™»å‡º",tabindex:"-1"},[a("ç”¨æˆ·ç™»å‡º "),n("a",{class:"header-anchor",href:"#ç”¨æˆ·ç™»å‡º","aria-label":"Permalink to â€œç”¨æˆ·ç™»å‡ºâ€"},"â€‹")],-1)),s[1]||(s[1]=n("h2",{id:"ç«¯ç‚¹ä¿¡æ¯",tabindex:"-1"},[a("ç«¯ç‚¹ä¿¡æ¯ "),n("a",{class:"header-anchor",href:"#ç«¯ç‚¹ä¿¡æ¯","aria-label":"Permalink to â€œç«¯ç‚¹ä¿¡æ¯â€"},"â€‹")],-1)),r(l,{method:"POST",path:"/auth/logout",requiresAuth:""}),s[2]||(s[2]=c(`<p>ç”¨æˆ·ç™»å‡ºæ¥å£ï¼Œç¦ç”¨å½“å‰ä½¿ç”¨çš„ API å¯†é’¥ã€‚</p><h2 id="æƒé™è¦æ±‚" tabindex="-1">æƒé™è¦æ±‚ <a class="header-anchor" href="#æƒé™è¦æ±‚" aria-label="Permalink to â€œæƒé™è¦æ±‚â€">â€‹</a></h2><ul><li><code>auth</code> æƒé™</li></ul><h2 id="è¯·æ±‚" tabindex="-1">è¯·æ±‚ <a class="header-anchor" href="#è¯·æ±‚" aria-label="Permalink to â€œè¯·æ±‚â€">â€‹</a></h2><h3 id="è¯·æ±‚å¤´" tabindex="-1">è¯·æ±‚å¤´ <a class="header-anchor" href="#è¯·æ±‚å¤´" aria-label="Permalink to â€œè¯·æ±‚å¤´â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å¤´éƒ¨</th><th>å€¼</th><th>å¿…å¡«</th></tr></thead><tbody><tr><td><code>Authorization</code></td><td><code>Bearer your_api_key</code></td><td>æ˜¯</td></tr><tr><td><code>Content-Type</code></td><td><code>application/json</code></td><td>å¦</td></tr></tbody></table><h2 id="å“åº”" tabindex="-1">å“åº” <a class="header-anchor" href="#å“åº”" aria-label="Permalink to â€œå“åº”â€">â€‹</a></h2><h3 id="æˆåŠŸå“åº”" tabindex="-1">æˆåŠŸå“åº” <a class="header-anchor" href="#æˆåŠŸå“åº”" aria-label="Permalink to â€œæˆåŠŸå“åº”â€">â€‹</a></h3><p><strong>çŠ¶æ€ç :</strong> <code>200 OK</code></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">success</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">message</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">ç™»å‡ºæˆåŠŸ</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="è®¤è¯å¤±è´¥" tabindex="-1">è®¤è¯å¤±è´¥ <a class="header-anchor" href="#è®¤è¯å¤±è´¥" aria-label="Permalink to â€œè®¤è¯å¤±è´¥â€">â€‹</a></h3><p><strong>çŠ¶æ€ç :</strong> <code>401 Unauthorized</code></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">éœ€è¦è®¤è¯ï¼Œè¯·æä¾›APIå¯†é’¥</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">æ— æ•ˆçš„APIå¯†é’¥</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="ä½¿ç”¨ç¤ºä¾‹" tabindex="-1">ä½¿ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹" aria-label="Permalink to â€œä½¿ç”¨ç¤ºä¾‹â€">â€‹</a></h2><h3 id="curl-ç¤ºä¾‹" tabindex="-1">cURL ç¤ºä¾‹ <a class="header-anchor" href="#curl-ç¤ºä¾‹" aria-label="Permalink to â€œcURL ç¤ºä¾‹â€">â€‹</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#676E95;font-style:italic;"># ç”¨æˆ·ç™»å‡º</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#C3E88D;"> -X</span><span style="color:#C3E88D;"> POST</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">https://dbapi.muzilix.cn/auth/logout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  -H</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Authorization: Bearer your_api_key</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨ç¯å¢ƒå˜é‡ä¸­çš„ API å¯†é’¥ç™»å‡º</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#C3E88D;"> -X</span><span style="color:#C3E88D;"> POST</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">https://dbapi.muzilix.cn/auth/logout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  -H</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Authorization: Bearer </span><span style="color:#BABED8;">$API_KEY</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="python-ç¤ºä¾‹" tabindex="-1">Python ç¤ºä¾‹ <a class="header-anchor" href="#python-ç¤ºä¾‹" aria-label="Permalink to â€œPython ç¤ºä¾‹â€">â€‹</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> requests</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> os</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> user_logout</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">ç”¨æˆ·ç™»å‡º</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    url </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">https://dbapi.muzilix.cn/auth/logout</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    headers </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Authorization</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;Bearer </span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">api_key</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        response </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">url</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">headers</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        result </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">status_code</span><span style="color:#89DDFF;"> ==</span><span style="color:#F78C6C;"> 200</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">success</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> True,</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">message</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">message</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">            }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">success</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> False,</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">ç™»å‡ºå¤±è´¥</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">            }</span></span>
<span class="line"><span style="color:#BABED8;">            </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">success</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> False,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;è¯·æ±‚å¤±è´¥: </span><span style="color:#F78C6C;">{</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> logout_and_cleanup</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> token_file</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.api_token</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">ç™»å‡ºå¹¶æ¸…ç†æœ¬åœ°å‡­è¯</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    result </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> user_logout</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">success</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # åˆ é™¤æœ¬åœ°ä¿å­˜çš„ä»¤ç‰Œæ–‡ä»¶</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exists</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">token_file</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">            os</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">remove</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">token_file</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">            print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;ğŸ—‘ï¸  å·²åˆ é™¤æœ¬åœ°ä»¤ç‰Œæ–‡ä»¶: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">token_file</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # æ¸…ç†ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœè®¾ç½®äº†ï¼‰</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">API_KEY</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">environ</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            del</span><span style="color:#BABED8;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">environ</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">API_KEY</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#82AAFF;">            print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ğŸ—‘ï¸  å·²æ¸…é™¤ç¯å¢ƒå˜é‡ä¸­çš„APIå¯†é’¥</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">âœ… ç™»å‡ºæˆåŠŸ</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> True</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;âŒ ç™»å‡ºå¤±è´¥: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> secure_logout_handler</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">å®‰å…¨çš„ç™»å‡ºå¤„ç†</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ğŸ”’ æ­£åœ¨æ‰§è¡Œå®‰å…¨ç™»å‡º...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # é¦–å…ˆéªŒè¯ä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆ</span></span>
<span class="line"><span style="color:#BABED8;">    verify_url </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">https://dbapi.muzilix.cn/auth/profile</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    headers </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Authorization</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;Bearer </span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">api_key</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        verify_response </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">verify_url</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">headers</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> timeout</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> verify_response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">status_code</span><span style="color:#89DDFF;"> ==</span><span style="color:#F78C6C;"> 200</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">            user_info </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> verify_response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#89DDFF;">()[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#82AAFF;">            print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;ğŸ‘¤ å½“å‰ç”¨æˆ·: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">user_info</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">            </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            # æ‰§è¡Œç™»å‡º</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#82AAFF;"> logout_and_cleanup</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">            print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">âš ï¸  APIå¯†é’¥å·²å¤±æ•ˆï¼Œç›´æ¥æ¸…ç†æœ¬åœ°å‡­è¯</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#82AAFF;"> logout_and_cleanup</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">            </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#BABED8;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">exceptions</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">Timeout</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">â° éªŒè¯è¶…æ—¶ï¼Œå°è¯•ç›´æ¥ç™»å‡º...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> logout_and_cleanup</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;âš ï¸  éªŒè¯å¤±è´¥: </span><span style="color:#F78C6C;">{</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">ï¼Œå°è¯•ç›´æ¥ç™»å‡º...&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> logout_and_cleanup</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> logout_from_file</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">token_file</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.api_token</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">ä»æ–‡ä»¶è¯»å–APIå¯†é’¥å¹¶ç™»å‡º</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        with</span><span style="color:#82AAFF;"> open</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">token_file</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">r</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> f</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">            api_key </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> f</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">read</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">strip</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#82AAFF;"> secure_logout_handler</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> FileNotFoundError</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">âŒ ä»¤ç‰Œæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ— éœ€ç™»å‡º</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> False</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;âŒ è¯»å–ä»¤ç‰Œæ–‡ä»¶å¤±è´¥: </span><span style="color:#F78C6C;">{</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#BABED8;"> __name__ </span><span style="color:#89DDFF;">==</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # æ–¹å¼1: ç›´æ¥æä¾›APIå¯†é’¥ç™»å‡º</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # api_key = &quot;your_api_key_here&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # secure_logout_handler(api_key)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # æ–¹å¼2: ä»æ–‡ä»¶ç™»å‡ºï¼ˆæ¨èï¼‰</span></span>
<span class="line"><span style="color:#82AAFF;">    logout_from_file</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # æ–¹å¼3: äº¤äº’å¼ç™»å‡º</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # api_key = input(&quot;è¯·è¾“å…¥è¦ç™»å‡ºçš„APIå¯†é’¥: &quot;).strip()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # if api_key:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    #     secure_logout_handler(api_key)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br></div></div><h3 id="javascript-ç¤ºä¾‹" tabindex="-1">JavaScript ç¤ºä¾‹ <a class="header-anchor" href="#javascript-ç¤ºä¾‹" aria-label="Permalink to â€œJavaScript ç¤ºä¾‹â€">â€‹</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#676E95;font-style:italic;">// ç”¨æˆ·ç™»å‡ºå‡½æ•°</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> userLogout</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">apiKey</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">        const</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#82AAFF;"> fetch</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://dbapi.muzilix.cn/auth/logout</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">            method</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            headers</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">                &#39;</span><span style="color:#F07178;">Authorization</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> \`</span><span style="color:#C3E88D;">Bearer </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">apiKey</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#89DDFF;">            }</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span></span>
<span class="line"><span style="color:#C792EA;">        const</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">response</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ok</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            // æ¸…ç†æœ¬åœ°å­˜å‚¨</span></span>
<span class="line"><span style="color:#BABED8;">            localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeItem</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">api_key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">            localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeItem</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">user_info</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span></span>
<span class="line"><span style="color:#BABED8;">            console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">âœ… ç™»å‡ºæˆåŠŸ</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">            console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">âŒ ç™»å‡ºå¤±è´¥:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#89DDFF;"> null;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span><span style="color:#89DDFF;font-style:italic;"> catch</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">error</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">âŒ è¯·æ±‚å¤±è´¥:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> null;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å®‰å…¨çš„ç™»å‡ºå¤„ç†</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> secureLogout</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> apiKey</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getItem</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">api_key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> userInfo</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getItem</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">user_info</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">||</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">{}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#BABED8;">apiKey</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">âš ï¸ æœªæ‰¾åˆ°APIå¯†é’¥ï¼Œæ— éœ€ç™»å‡º</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">userInfo</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">username</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ğŸ‘¤ å½“å‰ç”¨æˆ·: </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">userInfo</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">username</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // ç¡®è®¤ç™»å‡º</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">confirm</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ç¡®å®šè¦ç™»å‡ºå—ï¼Ÿ</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#C792EA;">        const</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#82AAFF;"> userLogout</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">apiKey</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">result</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            // é¢å¤–çš„æ¸…ç†æ“ä½œ</span></span>
<span class="line"><span style="color:#BABED8;">            sessionStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clear</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">            console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ğŸ—‘ï¸ å·²æ¸…ç†æ‰€æœ‰æœ¬åœ°å­˜å‚¨</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// secureLogout();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h2 id="ç™»å‡ºæœºåˆ¶è¯´æ˜" tabindex="-1">ç™»å‡ºæœºåˆ¶è¯´æ˜ <a class="header-anchor" href="#ç™»å‡ºæœºåˆ¶è¯´æ˜" aria-label="Permalink to â€œç™»å‡ºæœºåˆ¶è¯´æ˜â€">â€‹</a></h2><h3 id="_1-å¯†é’¥ç¦ç”¨" tabindex="-1">1. å¯†é’¥ç¦ç”¨ <a class="header-anchor" href="#_1-å¯†é’¥ç¦ç”¨" aria-label="Permalink to â€œ1. å¯†é’¥ç¦ç”¨â€">â€‹</a></h3><ul><li>å°†å½“å‰ä½¿ç”¨çš„ API å¯†é’¥æ ‡è®°ä¸ºç¦ç”¨çŠ¶æ€</li><li>å¯†é’¥ä¸ä¼šè¢«åˆ é™¤ï¼Œä¿ç•™å®¡è®¡è®°å½•</li><li>ç¦ç”¨åçš„å¯†é’¥æ— æ³•å†ç”¨äº API è°ƒç”¨</li></ul><h3 id="_2-ä¼šè¯ç®¡ç†" tabindex="-1">2. ä¼šè¯ç®¡ç† <a class="header-anchor" href="#_2-ä¼šè¯ç®¡ç†" aria-label="Permalink to â€œ2. ä¼šè¯ç®¡ç†â€">â€‹</a></h3><ul><li>æ”¯æŒå¤šä¸ªæ´»è·ƒçš„ API å¯†é’¥</li><li>ç™»å‡ºåªå½±å“å½“å‰ä½¿ç”¨çš„å¯†é’¥</li><li>å…¶ä»–å¯†é’¥ä»å¯æ­£å¸¸ä½¿ç”¨</li></ul><h3 id="_3-å®¡è®¡è®°å½•" tabindex="-1">3. å®¡è®¡è®°å½• <a class="header-anchor" href="#_3-å®¡è®¡è®°å½•" aria-label="Permalink to â€œ3. å®¡è®¡è®°å½•â€">â€‹</a></h3><ul><li>è®°å½•ç™»å‡ºæ“ä½œåˆ°å®¡è®¡æ—¥å¿—</li><li>åŒ…å«ç”¨æˆ·IDã€æ—¶é—´å’ŒIPåœ°å€</li><li>ç”¨äºå®‰å…¨å®¡è®¡å’Œè¿½è¸ª</li></ul><h2 id="å®‰å…¨æœ€ä½³å®è·µ" tabindex="-1">å®‰å…¨æœ€ä½³å®è·µ <a class="header-anchor" href="#å®‰å…¨æœ€ä½³å®è·µ" aria-label="Permalink to â€œå®‰å…¨æœ€ä½³å®è·µâ€">â€‹</a></h2><h3 id="_1-å®šæœŸç™»å‡º" tabindex="-1">1. å®šæœŸç™»å‡º <a class="header-anchor" href="#_1-å®šæœŸç™»å‡º" aria-label="Permalink to â€œ1. å®šæœŸç™»å‡ºâ€">â€‹</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> auto_logout_after_inactivity</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> inactivity_minutes</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">60</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">åœ¨é—²ç½®åè‡ªåŠ¨ç™»å‡º</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    import</span><span style="color:#BABED8;"> time</span></span>
<span class="line"><span style="color:#BABED8;">    last_activity </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">time</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # æ¨¡æ‹Ÿæ´»åŠ¨æ£€æµ‹</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> check_activity</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#C792EA;">        nonlocal</span><span style="color:#BABED8;"> last_activity</span></span>
<span class="line"><span style="color:#BABED8;">        current_time </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">time</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> current_time </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> last_activity </span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> inactivity_minutes </span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;"> 60</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">            print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ğŸ•’ æ£€æµ‹åˆ°é—²ç½®ï¼Œè‡ªåŠ¨ç™»å‡º...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">            user_logout</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#89DDFF;"> True</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> False</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # æ›´æ–°æ´»åŠ¨æ—¶é—´</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> update_activity</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#C792EA;">        nonlocal</span><span style="color:#BABED8;"> last_activity</span></span>
<span class="line"><span style="color:#BABED8;">        last_activity </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">time</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#BABED8;"> check_activity</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> update_activity</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># check_activity, update_activity = auto_logout_after_inactivity(api_key)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># åœ¨æ¯æ¬¡APIè°ƒç”¨åè°ƒç”¨ update_activity()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># å®šæœŸæ£€æŸ¥ check_activity()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_2-å¤šè®¾å¤‡ç®¡ç†" tabindex="-1">2. å¤šè®¾å¤‡ç®¡ç† <a class="header-anchor" href="#_2-å¤šè®¾å¤‡ç®¡ç†" aria-label="Permalink to â€œ2. å¤šè®¾å¤‡ç®¡ç†â€">â€‹</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> logout_all_sessions</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">admin_api_key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> target_user_id</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">ç™»å‡ºç”¨æˆ·çš„æ‰€æœ‰ä¼šè¯ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # æ³¨æ„ï¼šè¿™éœ€è¦ç®¡ç†å‘˜æƒé™å’Œç›¸åº”çš„APIç«¯ç‚¹</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # è¿™é‡Œåªæ˜¯æ¦‚å¿µç¤ºä¾‹</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;æ­£åœ¨ç™»å‡ºç”¨æˆ· </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">target_user_id</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;"> çš„æ‰€æœ‰ä¼šè¯...&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # å®ç°ä¼šè°ƒç”¨ç®¡ç†å‘˜APIæ¥ç¦ç”¨ç”¨æˆ·çš„æ‰€æœ‰APIå¯†é’¥</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="é”™è¯¯å¤„ç†" tabindex="-1">é”™è¯¯å¤„ç† <a class="header-anchor" href="#é”™è¯¯å¤„ç†" aria-label="Permalink to â€œé”™è¯¯å¤„ç†â€">â€‹</a></h2><h3 id="ç½‘ç»œé—®é¢˜" tabindex="-1">ç½‘ç»œé—®é¢˜ <a class="header-anchor" href="#ç½‘ç»œé—®é¢˜" aria-label="Permalink to â€œç½‘ç»œé—®é¢˜â€">â€‹</a></h3><ul><li>å®ç°é‡è¯•æœºåˆ¶</li><li>è¶…æ—¶å¤„ç†</li><li>ä¼˜é›…é™çº§</li></ul><h3 id="å¯†é’¥å¤±æ•ˆ" tabindex="-1">å¯†é’¥å¤±æ•ˆ <a class="header-anchor" href="#å¯†é’¥å¤±æ•ˆ" aria-label="Permalink to â€œå¯†é’¥å¤±æ•ˆâ€">â€‹</a></h3><ul><li>è‡ªåŠ¨æ¸…ç†æœ¬åœ°å­˜å‚¨</li><li>æä¾›é‡æ–°ç™»å½•æŒ‡å¼•</li><li>ä¿æŒç”¨æˆ·ä½“éªŒ</li></ul><h2 id="ç›¸å…³é“¾æ¥" tabindex="-1">ç›¸å…³é“¾æ¥ <a class="header-anchor" href="#ç›¸å…³é“¾æ¥" aria-label="Permalink to â€œç›¸å…³é“¾æ¥â€">â€‹</a></h2><ul><li><a href="./auth-login">ç”¨æˆ·ç™»å½•</a> - ç”¨æˆ·ç™»å½•è®¤è¯</li><li><a href="./auth-register">ç”¨æˆ·æ³¨å†Œ</a> - æ–°ç”¨æˆ·æ³¨å†Œ</li><li><a href="./auth-profile">ä¸ªäººä¿¡æ¯</a> - è·å–ç”¨æˆ·ä¿¡æ¯</li><li><a href="./../user-management/admin-api-keys">APIå¯†é’¥ç®¡ç†</a> - ç®¡ç†APIå¯†é’¥</li></ul>`,40))])}const d=p(F,[["render",i]]);export{E as __pageData,d as default};
