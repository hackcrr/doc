import{_ as a,c as n,o as l,aj as e}from"./chunks/framework.e3UxQEvm.js";const y=JSON.parse('{"title":"创建数据库备份","description":"","frontmatter":{},"headers":[],"relativePath":"api/backup-recovery/backup-database.md","filePath":"api/backup-recovery/backup-database.md","lastUpdated":0}'),o={name:"api/backup-recovery/backup-database.md"};function p(t,s,r,c,i,d){return l(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="创建数据库备份" tabindex="-1">创建数据库备份 <a class="header-anchor" href="#创建数据库备份" aria-label="Permalink to “创建数据库备份”">​</a></h1><h2 id="端点信息" tabindex="-1">端点信息 <a class="header-anchor" href="#端点信息" aria-label="Permalink to “端点信息”">​</a></h2><div class="language-http line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">POST</span><span style="color:#BABED8;"> /database/{db_name}/backup</span></span>
<span class="line"><span style="color:#F07178;">Authorization</span><span style="color:#F78C6C;">:</span><span style="color:#C3E88D;"> Bearer your_api_key</span></span>
<span class="line"><span style="color:#F07178;">Content-Type</span><span style="color:#F78C6C;">:</span><span style="color:#C3E88D;"> application/json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>创建指定数据库的备份，支持多种备份方法和选项。</p><h2 id="权限要求" tabindex="-1">权限要求 <a class="header-anchor" href="#权限要求" aria-label="Permalink to “权限要求”">​</a></h2><ul><li><code>backup_database</code> 权限</li><li>对目标数据库的 <code>write</code> 权限</li></ul><h2 id="请求" tabindex="-1">请求 <a class="header-anchor" href="#请求" aria-label="Permalink to “请求”">​</a></h2><h3 id="请求头" tabindex="-1">请求头 <a class="header-anchor" href="#请求头" aria-label="Permalink to “请求头”">​</a></h3><table tabindex="0"><thead><tr><th>头部</th><th>值</th><th>必填</th></tr></thead><tbody><tr><td><code>Authorization</code></td><td><code>Bearer your_api_key</code></td><td>是</td></tr><tr><td><code>Content-Type</code></td><td><code>application/json</code></td><td>是</td></tr></tbody></table><h3 id="路径参数" tabindex="-1">路径参数 <a class="header-anchor" href="#路径参数" aria-label="Permalink to “路径参数”">​</a></h3><table tabindex="0"><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td><code>db_name</code></td><td>string</td><td>是</td><td>数据库名称</td></tr></tbody></table><h3 id="请求体" tabindex="-1">请求体 <a class="header-anchor" href="#请求体" aria-label="Permalink to “请求体”">​</a></h3><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">backup_name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">manual_backup_2024</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">compress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">include_data</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">include_structure</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">method</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">auto</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="请求字段说明" tabindex="-1">请求字段说明 <a class="header-anchor" href="#请求字段说明" aria-label="Permalink to “请求字段说明”">​</a></h3><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>必填</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>backup_name</code></td><td>string</td><td>否</td><td>自动生成</td><td>备份名称</td></tr><tr><td><code>compress</code></td><td>boolean</td><td>否</td><td><code>true</code></td><td>是否压缩备份文件</td></tr><tr><td><code>include_data</code></td><td>boolean</td><td>否</td><td><code>true</code></td><td>是否包含数据</td></tr><tr><td><code>include_structure</code></td><td>boolean</td><td>否</td><td><code>true</code></td><td>是否包含表结构</td></tr><tr><td><code>method</code></td><td>string</td><td>否</td><td><code>auto</code></td><td>备份方法：auto, python, mysqldump</td></tr></tbody></table><h2 id="响应" tabindex="-1">响应 <a class="header-anchor" href="#响应" aria-label="Permalink to “响应”">​</a></h2><h3 id="成功响应" tabindex="-1">成功响应 <a class="header-anchor" href="#成功响应" aria-label="Permalink to “成功响应”">​</a></h3><p><strong>状态码:</strong> <code>202 Accepted</code></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">success</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">message</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">备份任务已启动</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">backup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">backup_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">admin_my_database_manual_backup_2024_20240120_143000.sql.gz</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">database</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">my_database</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">filename</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">admin_my_database_manual_backup_2024_20240120_143000.sql.gz</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">status</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">started</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">method</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">python</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">start_time</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">2024-01-20T14:30:00</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">backup_path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/backups/admin_my_database_manual_backup_2024_20240120_143000.sql.gz</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">compress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="响应字段说明" tabindex="-1">响应字段说明 <a class="header-anchor" href="#响应字段说明" aria-label="Permalink to “响应字段说明”">​</a></h3><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>success</code></td><td>boolean</td><td>操作是否成功</td></tr><tr><td><code>message</code></td><td>string</td><td>操作结果消息</td></tr><tr><td><code>backup</code></td><td>object</td><td>备份任务信息</td></tr></tbody></table><h4 id="备份任务信息" tabindex="-1">备份任务信息 <a class="header-anchor" href="#备份任务信息" aria-label="Permalink to “备份任务信息”">​</a></h4><table tabindex="0"><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>backup_id</code></td><td>string</td><td>备份任务ID</td></tr><tr><td><code>database</code></td><td>string</td><td>数据库名称</td></tr><tr><td><code>filename</code></td><td>string</td><td>备份文件名</td></tr><tr><td><code>status</code></td><td>string</td><td>备份状态</td></tr><tr><td><code>method</code></td><td>string</td><td>使用的备份方法</td></tr><tr><td><code>start_time</code></td><td>string</td><td>开始时间</td></tr><tr><td><code>backup_path</code></td><td>string</td><td>备份文件路径</td></tr><tr><td><code>compress</code></td><td>boolean</td><td>是否压缩</td></tr></tbody></table><h2 id="使用示例" tabindex="-1">使用示例 <a class="header-anchor" href="#使用示例" aria-label="Permalink to “使用示例”">​</a></h2><h3 id="curl-示例-基础备份" tabindex="-1">cURL 示例 - 基础备份 <a class="header-anchor" href="#curl-示例-基础备份" aria-label="Permalink to “cURL 示例 - 基础备份”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#C3E88D;"> -X</span><span style="color:#C3E88D;"> POST</span><span style="color:#C3E88D;"> https://dbapi.muzilix.cn/database/my_database/backup</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  -H</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Authorization: Bearer your_api_key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  -H</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Content-Type: application/json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  -d</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">{</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;backup_name&quot;: &quot;pre_deployment&quot;,</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;compress&quot;: true</span></span>
<span class="line"><span style="color:#C3E88D;">  }</span><span style="color:#89DDFF;">&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="curl-示例-高级选项" tabindex="-1">cURL 示例 - 高级选项 <a class="header-anchor" href="#curl-示例-高级选项" aria-label="Permalink to “cURL 示例 - 高级选项”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#C3E88D;"> -X</span><span style="color:#C3E88D;"> POST</span><span style="color:#C3E88D;"> https://dbapi.muzilix.cn/database/my_database/backup</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  -H</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Authorization: Bearer your_api_key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  -H</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Content-Type: application/json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  -d</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">{</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;backup_name&quot;: &quot;structure_only&quot;,</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;compress&quot;: false,</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;include_data&quot;: false,</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;include_structure&quot;: true,</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;method&quot;: &quot;python&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">  }</span><span style="color:#89DDFF;">&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="python-示例" tabindex="-1">Python 示例 <a class="header-anchor" href="#python-示例" aria-label="Permalink to “Python 示例”">​</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> create_database_backup</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> db_name</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> backup_config</span><span style="color:#89DDFF;">=None):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">创建数据库备份</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    url </span><span style="color:#89DDFF;">=</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;https://dbapi.muzilix.cn/database/</span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">db_name</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">/backup&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    headers </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">Authorization</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;Bearer </span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">api_key</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">Content-Type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> backup_config </span><span style="color:#89DDFF;">is</span><span style="color:#89DDFF;"> None:</span></span>
<span class="line"><span style="color:#BABED8;">        backup_config </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {}</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#BABED8;">    response </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">url</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">headers</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> json</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">backup_config</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 基础备份</span></span>
<span class="line"><span style="color:#BABED8;">basic_backup </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> create_database_backup</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your_api_key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">production_db</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 自定义备份</span></span>
<span class="line"><span style="color:#BABED8;">custom_backup </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> create_database_backup</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your_api_key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">analytics_db</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">backup_name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">weekly_full</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">compress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> True,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">include_data</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> True,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">include_structure</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> True,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">method</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">auto</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 仅结构备份</span></span>
<span class="line"><span style="color:#BABED8;">structure_backup </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> create_database_backup</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your_api_key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">development_db</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">backup_name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">schema_only</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">include_data</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> False,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">include_structure</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> True</span></span>
<span class="line"><span style="color:#89DDFF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="备份方法" tabindex="-1">备份方法 <a class="header-anchor" href="#备份方法" aria-label="Permalink to “备份方法”">​</a></h2><h3 id="auto-自动选择" tabindex="-1">auto（自动选择） <a class="header-anchor" href="#auto-自动选择" aria-label="Permalink to “auto（自动选择）”">​</a></h3><p>系统自动选择可用的备份方法：</p><ul><li>优先使用 <code>mysqldump</code>（如果可用）</li><li>回退到 <code>python</code> 方法</li></ul><h3 id="python-python-实现" tabindex="-1">python（Python 实现） <a class="header-anchor" href="#python-python-实现" aria-label="Permalink to “python（Python 实现）”">​</a></h3><p>使用纯 Python 实现的备份：</p><ul><li>不依赖外部工具</li><li>生成标准 SQL 格式</li><li>支持所有 MySQL 功能</li></ul><h3 id="mysqldump-mysql-工具" tabindex="-1">mysqldump（MySQL 工具） <a class="header-anchor" href="#mysqldump-mysql-工具" aria-label="Permalink to “mysqldump（MySQL 工具）”">​</a></h3><p>使用 MySQL 官方工具：</p><ul><li>高性能备份</li><li>支持高级选项</li><li>需要系统安装 mysqldump</li></ul><h2 id="备份内容" tabindex="-1">备份内容 <a class="header-anchor" href="#备份内容" aria-label="Permalink to “备份内容”">​</a></h2><h3 id="完整备份" tabindex="-1">完整备份 <a class="header-anchor" href="#完整备份" aria-label="Permalink to “完整备份”">​</a></h3><p>包含数据库的所有内容：</p><ul><li>表结构（CREATE TABLE）</li><li>表数据（INSERT 语句）</li><li>存储过程和函数</li><li>事件和触发器</li></ul><h3 id="结构备份" tabindex="-1">结构备份 <a class="header-anchor" href="#结构备份" aria-label="Permalink to “结构备份”">​</a></h3><p>仅包含数据库结构：</p><ul><li>表结构定义</li><li>索引和约束</li><li>存储过程定义</li><li>不包含实际数据</li></ul><h3 id="数据备份" tabindex="-1">数据备份 <a class="header-anchor" href="#数据备份" aria-label="Permalink to “数据备份”">​</a></h3><p>仅包含表数据：</p><ul><li>所有表的 INSERT 语句</li><li>不包含表结构定义</li><li>适合数据迁移</li></ul><h2 id="文件命名规则" tabindex="-1">文件命名规则 <a class="header-anchor" href="#文件命名规则" aria-label="Permalink to “文件命名规则”">​</a></h2><h3 id="自动生成格式" tabindex="-1">自动生成格式 <a class="header-anchor" href="#自动生成格式" aria-label="Permalink to “自动生成格式”">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span>{用户名}_{数据库名}_backup_{时间戳}.{扩展名}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="自定义名称格式" tabindex="-1">自定义名称格式 <a class="header-anchor" href="#自定义名称格式" aria-label="Permalink to “自定义名称格式”">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span>{用户名}_{数据库名}_{备份名}_{时间戳}.{扩展名}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="扩展名" tabindex="-1">扩展名 <a class="header-anchor" href="#扩展名" aria-label="Permalink to “扩展名”">​</a></h3><ul><li>未压缩: <code>.sql</code></li><li>压缩: <code>.sql.gz</code></li></ul><h2 id="备份状态" tabindex="-1">备份状态 <a class="header-anchor" href="#备份状态" aria-label="Permalink to “备份状态”">​</a></h2><h3 id="任务状态" tabindex="-1">任务状态 <a class="header-anchor" href="#任务状态" aria-label="Permalink to “任务状态”">​</a></h3><ul><li><code>started</code> - 备份任务已接受</li><li><code>processing</code> - 备份执行中</li><li><code>completed</code> - 备份完成</li><li><code>failed</code> - 备份失败</li></ul><h3 id="状态检查" tabindex="-1">状态检查 <a class="header-anchor" href="#状态检查" aria-label="Permalink to “状态检查”">​</a></h3><p>备份任务提交后，使用以下接口检查状态：</p><div class="language-http line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">GET</span><span style="color:#BABED8;"> /database/{db_name}/backup/{backup_id}/status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="限制说明" tabindex="-1">限制说明 <a class="header-anchor" href="#限制说明" aria-label="Permalink to “限制说明”">​</a></h2><h3 id="操作限制" tabindex="-1">操作限制 <a class="header-anchor" href="#操作限制" aria-label="Permalink to “操作限制”">​</a></h3><ul><li>频率限制：3次/小时</li><li>备份超时：300秒（5分钟）</li><li>文件大小：受磁盘空间限制</li></ul><h3 id="系统要求" tabindex="-1">系统要求 <a class="header-anchor" href="#系统要求" aria-label="Permalink to “系统要求”">​</a></h3><ul><li>Python 备份：无需额外依赖</li><li>mysqldump 备份：需要系统安装 MySQL 客户端工具</li></ul><h2 id="相关链接" tabindex="-1">相关链接 <a class="header-anchor" href="#相关链接" aria-label="Permalink to “相关链接”">​</a></h2><ul><li><a href="./../backup-recovery/">备份恢复总览</a></li><li><a href="./backup-status">备份状态</a></li><li><a href="./list-backups">备份列表</a></li><li><a href="./download-backup">下载备份</a></li></ul>`,70)])])}const F=a(o,[["render",p]]);export{y as __pageData,F as default};
