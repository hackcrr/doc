import{_ as e,c as l,o as i,aj as r}from"./chunks/framework.e3UxQEvm.js";const u=JSON.parse('{"title":"备份恢复","description":"","frontmatter":{},"headers":[],"relativePath":"api/backup-recovery/index.md","filePath":"api/backup-recovery/index.md","lastUpdated":1764594265000}'),d={name:"api/backup-recovery/index.md"};function h(c,a,o,n,s,t){return i(),l("div",null,[...a[0]||(a[0]=[r('<h1 id="备份恢复" tabindex="-1">备份恢复 <a class="header-anchor" href="#备份恢复" aria-label="Permalink to “备份恢复”">​</a></h1><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to “概述”">​</a></h2><p>备份恢复 API 提供数据库的备份创建、管理、下载和恢复功能，支持手动备份、自动备份策略和备份状态监控。</p><h2 id="接口列表" tabindex="-1">接口列表 <a class="header-anchor" href="#接口列表" aria-label="Permalink to “接口列表”">​</a></h2><h3 id="备份管理" tabindex="-1">备份管理 <a class="header-anchor" href="#备份管理" aria-label="Permalink to “备份管理”">​</a></h3><ul><li><a href="./backup-database"><code>POST /database/{db_name}/backup</code></a> - 创建数据库备份</li><li><a href="./list-backups"><code>GET /database/{db_name}/backups</code></a> - 获取备份列表</li><li><a href="./download-backup"><code>GET /backup/{filename}</code></a> - 下载备份文件</li><li><a href="./delete-backup"><code>DELETE /backup/{filename}</code></a> - 删除备份文件</li></ul><h3 id="备份状态" tabindex="-1">备份状态 <a class="header-anchor" href="#备份状态" aria-label="Permalink to “备份状态”">​</a></h3><ul><li><a href="./backup-status"><code>GET /database/{db_name}/backup/{backup_id}/status</code></a> - 获取备份任务状态</li><li><a href="./backup-status"><code>GET /database/{db_name}/backup/tasks</code></a> - 获取备份任务列表</li></ul><h3 id="自动备份" tabindex="-1">自动备份 <a class="header-anchor" href="#自动备份" aria-label="Permalink to “自动备份”">​</a></h3><ul><li><a href="./auto-backup"><code>POST /database/{db_name}/backup/auto</code></a> - 配置自动备份</li></ul><h2 id="通用要求" tabindex="-1">通用要求 <a class="header-anchor" href="#通用要求" aria-label="Permalink to “通用要求”">​</a></h2><h3 id="认证" tabindex="-1">认证 <a class="header-anchor" href="#认证" aria-label="Permalink to “认证”">​</a></h3><p>所有备份恢复接口都需要认证：</p><div class="language-http line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#F07178;">Authorization</span><span style="color:#F78C6C;">:</span><span style="color:#C3E88D;"> Bearer your_api_key</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="权限要求" tabindex="-1">权限要求 <a class="header-anchor" href="#权限要求" aria-label="Permalink to “权限要求”">​</a></h3><ul><li>创建备份：<code>backup_database</code> 权限 + 数据库 <code>write</code> 权限</li><li>查看备份：<code>list_backups</code> 权限 + 数据库 <code>read</code> 权限</li><li>下载备份：<code>download_backup</code> 权限 + 数据库 <code>read</code> 权限</li><li>删除备份：<code>delete_backup</code> 权限 + 数据库 <code>write</code> 权限</li><li>自动备份：<code>auto_backup</code> 权限 + 数据库 <code>write</code> 权限</li></ul><h2 id="备份类型" tabindex="-1">备份类型 <a class="header-anchor" href="#备份类型" aria-label="Permalink to “备份类型”">​</a></h2><h3 id="手动备份" tabindex="-1">手动备份 <a class="header-anchor" href="#手动备份" aria-label="Permalink to “手动备份”">​</a></h3><ul><li>按需创建数据库备份</li><li>支持自定义备份名称</li><li>可选择压缩和内容选项</li></ul><h3 id="自动备份-1" tabindex="-1">自动备份 <a class="header-anchor" href="#自动备份-1" aria-label="Permalink to “自动备份”">​</a></h3><ul><li>基于计划的定期备份</li><li>支持每日、每周、每月策略</li><li>自动清理旧备份文件</li></ul><h2 id="备份方法" tabindex="-1">备份方法 <a class="header-anchor" href="#备份方法" aria-label="Permalink to “备份方法”">​</a></h2><h3 id="python-备份" tabindex="-1">Python 备份 <a class="header-anchor" href="#python-备份" aria-label="Permalink to “Python 备份”">​</a></h3><ul><li>纯 Python 实现，不依赖外部工具</li><li>生成标准 SQL 格式备份</li><li>支持数据和结构分离备份</li></ul><h3 id="mysqldump-备份" tabindex="-1">mysqldump 备份 <a class="header-anchor" href="#mysqldump-备份" aria-label="Permalink to “mysqldump 备份”">​</a></h3><ul><li>使用 MySQL 官方工具</li><li>高性能备份大型数据库</li><li>支持高级备份选项</li></ul><h2 id="备份文件" tabindex="-1">备份文件 <a class="header-anchor" href="#备份文件" aria-label="Permalink to “备份文件”">​</a></h2><h3 id="文件格式" tabindex="-1">文件格式 <a class="header-anchor" href="#文件格式" aria-label="Permalink to “文件格式”">​</a></h3><ul><li><strong>未压缩</strong>: <code>.sql</code> - 纯文本 SQL 文件</li><li><strong>压缩</strong>: <code>.sql.gz</code> - Gzip 压缩的 SQL 文件</li></ul><h3 id="文件命名" tabindex="-1">文件命名 <a class="header-anchor" href="#文件命名" aria-label="Permalink to “文件命名”">​</a></h3><p>备份文件遵循统一的命名规范：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span>{用户名}_{数据库名}_{备份名}_{时间戳}.sql[.gz]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="存储管理" tabindex="-1">存储管理 <a class="header-anchor" href="#存储管理" aria-label="Permalink to “存储管理”">​</a></h3><ul><li>存储目录：<code>/backups</code></li><li>自动文件清理</li><li>用户隔离存储</li></ul><h2 id="备份选项" tabindex="-1">备份选项 <a class="header-anchor" href="#备份选项" aria-label="Permalink to “备份选项”">​</a></h2><h3 id="内容选项" tabindex="-1">内容选项 <a class="header-anchor" href="#内容选项" aria-label="Permalink to “内容选项”">​</a></h3><ul><li>包含表数据</li><li>包含表结构</li><li>包含存储过程和函数</li></ul><h3 id="压缩选项" tabindex="-1">压缩选项 <a class="header-anchor" href="#压缩选项" aria-label="Permalink to “压缩选项”">​</a></h3><ul><li>启用 Gzip 压缩</li><li>减少存储空间占用</li><li>保持文件完整性</li></ul><h2 id="状态监控" tabindex="-1">状态监控 <a class="header-anchor" href="#状态监控" aria-label="Permalink to “状态监控”">​</a></h2><h3 id="备份状态-1" tabindex="-1">备份状态 <a class="header-anchor" href="#备份状态-1" aria-label="Permalink to “备份状态”">​</a></h3><ul><li><code>started</code> - 备份任务已启动</li><li><code>processing</code> - 备份进行中</li><li><code>completed</code> - 备份完成</li><li><code>failed</code> - 备份失败</li></ul><h3 id="任务跟踪" tabindex="-1">任务跟踪 <a class="header-anchor" href="#任务跟踪" aria-label="Permalink to “任务跟踪”">​</a></h3><ul><li>实时备份进度监控</li><li>备份任务历史记录</li><li>错误日志和诊断信息</li></ul><h2 id="安全特性" tabindex="-1">安全特性 <a class="header-anchor" href="#安全特性" aria-label="Permalink to “安全特性”">​</a></h2><h3 id="访问控制" tabindex="-1">访问控制 <a class="header-anchor" href="#访问控制" aria-label="Permalink to “访问控制”">​</a></h3><ul><li>用户只能访问自己的备份文件</li><li>数据库权限验证</li><li>文件下载权限检查</li></ul><h3 id="操作保护" tabindex="-1">操作保护 <a class="header-anchor" href="#操作保护" aria-label="Permalink to “操作保护”">​</a></h3><ul><li>备份文件完整性验证</li><li>操作频率限制</li><li>敏感信息保护</li></ul><h2 id="限制说明" tabindex="-1">限制说明 <a class="header-anchor" href="#限制说明" aria-label="Permalink to “限制说明”">​</a></h2><h3 id="操作限制" tabindex="-1">操作限制 <a class="header-anchor" href="#操作限制" aria-label="Permalink to “操作限制”">​</a></h3><ul><li>备份创建：3次/小时</li><li>自动备份：1次/天</li><li>文件下载：受网络带宽限制</li></ul><h3 id="存储限制" tabindex="-1">存储限制 <a class="header-anchor" href="#存储限制" aria-label="Permalink to “存储限制”">​</a></h3><ul><li>每个用户最大备份文件数：10个</li><li>自动清理旧备份文件</li><li>磁盘空间监控</li></ul><h2 id="下一步" tabindex="-1">下一步 <a class="header-anchor" href="#下一步" aria-label="Permalink to “下一步”">​</a></h2><ul><li>💾 学习 <a href="./backup-database">创建备份</a></li><li>📋 查看 <a href="./list-backups">备份列表</a></li><li>⬇️ 了解 <a href="./download-backup">下载备份</a></li><li>🗑️ 了解 <a href="./delete-backup">删除备份</a></li><li>🔄 配置 <a href="./auto-backup">自动备份</a></li><li>📊 监控 <a href="./backup-status">备份状态</a></li></ul>',56)])])}const p=e(d,[["render",h]]);export{u as __pageData,p as default};
