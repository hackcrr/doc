import{_ as p,I as o,c as e,o as t,j as n,J as r,aj as c,a}from"./chunks/framework.e3UxQEvm.js";const A=JSON.parse('{"title":"æ€§èƒ½ç»Ÿè®¡","description":"","frontmatter":{},"headers":[],"relativePath":"api/monitoring-stats/performance-stats.md","filePath":"api/monitoring-stats/performance-stats.md","lastUpdated":1764654523000}'),F={name:"api/monitoring-stats/performance-stats.md"};function D(y,s,i,u,b,C){const l=o("ApiEndpoint");return t(),e("div",null,[s[0]||(s[0]=n("h1",{id:"æ€§èƒ½ç»Ÿè®¡",tabindex:"-1"},[a("æ€§èƒ½ç»Ÿè®¡ "),n("a",{class:"header-anchor",href:"#æ€§èƒ½ç»Ÿè®¡","aria-label":"Permalink to â€œæ€§èƒ½ç»Ÿè®¡â€"},"â€‹")],-1)),s[1]||(s[1]=n("h2",{id:"ç«¯ç‚¹ä¿¡æ¯",tabindex:"-1"},[a("ç«¯ç‚¹ä¿¡æ¯ "),n("a",{class:"header-anchor",href:"#ç«¯ç‚¹ä¿¡æ¯","aria-label":"Permalink to â€œç«¯ç‚¹ä¿¡æ¯â€"},"â€‹")],-1)),r(l,{method:"GET",path:"/stats/performance"}),s[2]||(s[2]=c(`<p>è·å–æ•°æ®åº“æ€§èƒ½ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿æ¥çŠ¶æ€ã€æŸ¥è¯¢ç»Ÿè®¡å’Œç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡ã€‚</p><h2 id="æƒé™è¦æ±‚" tabindex="-1">æƒé™è¦æ±‚ <a class="header-anchor" href="#æƒé™è¦æ±‚" aria-label="Permalink to â€œæƒé™è¦æ±‚â€">â€‹</a></h2><ul><li><code>monitoring</code> æƒé™</li></ul><h2 id="è¯·æ±‚" tabindex="-1">è¯·æ±‚ <a class="header-anchor" href="#è¯·æ±‚" aria-label="Permalink to â€œè¯·æ±‚â€">â€‹</a></h2><h3 id="è¯·æ±‚å¤´" tabindex="-1">è¯·æ±‚å¤´ <a class="header-anchor" href="#è¯·æ±‚å¤´" aria-label="Permalink to â€œè¯·æ±‚å¤´â€">â€‹</a></h3><table tabindex="0"><thead><tr><th>å¤´éƒ¨</th><th>å€¼</th><th>å¿…å¡«</th></tr></thead><tbody><tr><td><code>Authorization</code></td><td><code>Bearer your_api_key</code></td><td>æ˜¯</td></tr></tbody></table><h2 id="å“åº”" tabindex="-1">å“åº” <a class="header-anchor" href="#å“åº”" aria-label="Permalink to â€œå“åº”â€">â€‹</a></h2><h3 id="æˆåŠŸå“åº”" tabindex="-1">æˆåŠŸå“åº” <a class="header-anchor" href="#æˆåŠŸå“åº”" aria-label="Permalink to â€œæˆåŠŸå“åº”â€">â€‹</a></h3><p><strong>çŠ¶æ€ç :</strong> <code>200 OK</code></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">timestamp</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">2024-01-20T15:30:00</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">connection_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">threads_connected</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 25</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">max_used_connections</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 48</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">threads_running</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">threads_created</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 1250</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">connection_usage_percent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 52.1</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">query_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">total_queries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 1258472</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">slow_queries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 42</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">queries_per_second</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 145.3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">select_queries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 985421</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">insert_queries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 156234</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">update_queries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 89234</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">delete_queries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 27583</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">table_cache</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">open_tables</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 128</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">table_locks_waited</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 5</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">table_locks_immediate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 984512</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">buffer_pool</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">buffer_pool_hit_rate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 99.7</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">pages_read</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 12584</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">pages_created</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 892</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">pages_written</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 4562</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">innodb_available</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">performance_health</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">excellent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="å“åº”å­—æ®µè¯´æ˜" tabindex="-1">å“åº”å­—æ®µè¯´æ˜ <a class="header-anchor" href="#å“åº”å­—æ®µè¯´æ˜" aria-label="Permalink to â€œå“åº”å­—æ®µè¯´æ˜â€">â€‹</a></h3><h4 id="è¿æ¥ç»Ÿè®¡" tabindex="-1">è¿æ¥ç»Ÿè®¡ <a class="header-anchor" href="#è¿æ¥ç»Ÿè®¡" aria-label="Permalink to â€œè¿æ¥ç»Ÿè®¡â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>threads_connected</code></td><td>integer</td><td>å½“å‰è¿æ¥æ•°</td></tr><tr><td><code>max_used_connections</code></td><td>integer</td><td>å†å²æœ€å¤§è¿æ¥æ•°</td></tr><tr><td><code>threads_running</code></td><td>integer</td><td>æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°</td></tr><tr><td><code>threads_created</code></td><td>integer</td><td>å·²åˆ›å»ºçš„çº¿ç¨‹æ€»æ•°</td></tr><tr><td><code>connection_usage_percent</code></td><td>number</td><td>è¿æ¥ä½¿ç”¨ç‡ç™¾åˆ†æ¯”</td></tr></tbody></table><h4 id="æŸ¥è¯¢ç»Ÿè®¡" tabindex="-1">æŸ¥è¯¢ç»Ÿè®¡ <a class="header-anchor" href="#æŸ¥è¯¢ç»Ÿè®¡" aria-label="Permalink to â€œæŸ¥è¯¢ç»Ÿè®¡â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>total_queries</code></td><td>integer</td><td>æ€»æŸ¥è¯¢æ¬¡æ•°</td></tr><tr><td><code>slow_queries</code></td><td>integer</td><td>æ…¢æŸ¥è¯¢æ¬¡æ•°</td></tr><tr><td><code>queries_per_second</code></td><td>number</td><td>æ¯ç§’æŸ¥è¯¢æ•°</td></tr><tr><td><code>select_queries</code></td><td>integer</td><td>SELECT æŸ¥è¯¢æ¬¡æ•°</td></tr><tr><td><code>insert_queries</code></td><td>integer</td><td>INSERT æŸ¥è¯¢æ¬¡æ•°</td></tr><tr><td><code>update_queries</code></td><td>integer</td><td>UPDATE æŸ¥è¯¢æ¬¡æ•°</td></tr><tr><td><code>delete_queries</code></td><td>integer</td><td>DELETE æŸ¥è¯¢æ¬¡æ•°</td></tr></tbody></table><h4 id="è¡¨ç¼“å­˜" tabindex="-1">è¡¨ç¼“å­˜ <a class="header-anchor" href="#è¡¨ç¼“å­˜" aria-label="Permalink to â€œè¡¨ç¼“å­˜â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>open_tables</code></td><td>integer</td><td>æ‰“å¼€çš„è¡¨æ•°é‡</td></tr><tr><td><code>table_locks_waited</code></td><td>integer</td><td>è¡¨é”ç­‰å¾…æ¬¡æ•°</td></tr><tr><td><code>table_locks_immediate</code></td><td>integer</td><td>ç«‹å³è·å¾—çš„è¡¨é”æ¬¡æ•°</td></tr></tbody></table><h4 id="ç¼“å†²æ± -innodb" tabindex="-1">ç¼“å†²æ±  (InnoDB) <a class="header-anchor" href="#ç¼“å†²æ± -innodb" aria-label="Permalink to â€œç¼“å†²æ±  (InnoDB)â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>buffer_pool_hit_rate</code></td><td>number</td><td>ç¼“å†²æ± å‘½ä¸­ç‡ (%)</td></tr><tr><td><code>pages_read</code></td><td>integer</td><td>è¯»å–çš„é¡µæ•°</td></tr><tr><td><code>pages_created</code></td><td>integer</td><td>åˆ›å»ºçš„é¡µæ•°</td></tr><tr><td><code>pages_written</code></td><td>integer</td><td>å†™å…¥çš„é¡µæ•°</td></tr></tbody></table><h4 id="ç³»ç»Ÿä¿¡æ¯" tabindex="-1">ç³»ç»Ÿä¿¡æ¯ <a class="header-anchor" href="#ç³»ç»Ÿä¿¡æ¯" aria-label="Permalink to â€œç³»ç»Ÿä¿¡æ¯â€">â€‹</a></h4><table tabindex="0"><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>innodb_available</code></td><td>boolean</td><td>InnoDB æ˜¯å¦å¯ç”¨</td></tr><tr><td><code>performance_health</code></td><td>string</td><td>æ€§èƒ½å¥åº·çŠ¶æ€</td></tr></tbody></table><h2 id="ä½¿ç”¨ç¤ºä¾‹" tabindex="-1">ä½¿ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹" aria-label="Permalink to â€œä½¿ç”¨ç¤ºä¾‹â€">â€‹</a></h2><h3 id="curl-ç¤ºä¾‹" tabindex="-1">cURL ç¤ºä¾‹ <a class="header-anchor" href="#curl-ç¤ºä¾‹" aria-label="Permalink to â€œcURL ç¤ºä¾‹â€">â€‹</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#C3E88D;"> -X</span><span style="color:#C3E88D;"> GET</span><span style="color:#C3E88D;"> https://dbapi.muzilix.cn/stats/performance</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  -H</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Authorization: Bearer your_api_key</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="python-ç¤ºä¾‹" tabindex="-1">Python ç¤ºä¾‹ <a class="header-anchor" href="#python-ç¤ºä¾‹" aria-label="Permalink to â€œPython ç¤ºä¾‹â€">â€‹</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> get_performance_stats</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">è·å–æ€§èƒ½ç»Ÿè®¡ä¿¡æ¯</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    url </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">https://dbapi.muzilix.cn/stats/performance</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    headers </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Authorization</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;Bearer </span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">api_key</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#BABED8;">    response </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">url</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">headers</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#BABED8;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> analyze_performance_health</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">åˆ†ææ€§èƒ½å¥åº·çŠ¶å†µ</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    stats </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> get_performance_stats</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ğŸ¯ æ•°æ®åº“æ€§èƒ½åˆ†æ</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> *</span><span style="color:#F78C6C;"> 50</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # è¿æ¥åˆ†æ</span></span>
<span class="line"><span style="color:#BABED8;">    conn_stats </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">connection_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">ğŸ”— è¿æ¥ç»Ÿè®¡:&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   å½“å‰è¿æ¥: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">conn_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">threads_connected</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   è¿è¡Œçº¿ç¨‹: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">conn_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">threads_running</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   è¿æ¥ä½¿ç”¨ç‡: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">conn_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">connection_usage_percent</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">%&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # æŸ¥è¯¢åˆ†æ</span></span>
<span class="line"><span style="color:#BABED8;">    query_stats </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">query_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">ğŸ“Š æŸ¥è¯¢ç»Ÿè®¡:&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   QPS: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">query_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">queries_per_second</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   æ…¢æŸ¥è¯¢: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">query_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">slow_queries</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   æŸ¥è¯¢ç±»å‹åˆ†å¸ƒ:&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;     SELECT: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">query_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">select_queries</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">:,</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;     INSERT: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">query_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">insert_queries</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">:,</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;     UPDATE: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">query_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">update_queries</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">:,</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;     DELETE: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">query_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">delete_queries</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">:,</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # ç¼“å†²æ± åˆ†æ</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">innodb_available</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#BABED8;">        buffer_stats </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">buffer_pool</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">ğŸ’¾ InnoDB ç¼“å†²æ± :&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   å‘½ä¸­ç‡: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">buffer_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">buffer_pool_hit_rate</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">%&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   é¡µè¯»å–: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">buffer_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pages_read</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">:,</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   é¡µåˆ›å»º: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">buffer_stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pages_created</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">:,</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # å¥åº·çŠ¶æ€</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">â¤ï¸  æ€§èƒ½å¥åº·: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">performance_health</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">].</span><span style="color:#82AAFF;">upper</span><span style="color:#89DDFF;">()</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> monitor_performance_thresholds</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">ç›‘æ§æ€§èƒ½é˜ˆå€¼</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    stats </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> get_performance_stats</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#BABED8;">    alerts </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> []</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # è¿æ¥é˜ˆå€¼æ£€æŸ¥</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">connection_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">connection_usage_percent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> &gt;</span><span style="color:#F78C6C;"> 80</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        alerts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">âš ï¸  è¿æ¥ä½¿ç”¨ç‡è¶…è¿‡80%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # æ…¢æŸ¥è¯¢æ£€æŸ¥</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">query_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">slow_queries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> &gt;</span><span style="color:#F78C6C;"> 10</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        alerts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">âš ï¸  æ…¢æŸ¥è¯¢æ•°é‡è¾ƒå¤š</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # ç¼“å†²æ± å‘½ä¸­ç‡æ£€æŸ¥</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">innodb_available</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">buffer_pool</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">buffer_pool_hit_rate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> &lt;</span><span style="color:#F78C6C;"> 95</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">            alerts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">âš ï¸  ç¼“å†²æ± å‘½ä¸­ç‡ä½äº95%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # è¡¨é”ç­‰å¾…æ£€æŸ¥</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">table_cache</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">table_locks_waited</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> &gt;</span><span style="color:#F78C6C;"> 100</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        alerts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">âš ï¸  è¡¨é”ç­‰å¾…æ¬¡æ•°è¾ƒå¤š</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> alerts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ğŸš¨ æ€§èƒ½å‘Šè­¦:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> alert </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> alerts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">            print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">alert</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">âœ… æ‰€æœ‰æ€§èƒ½æŒ‡æ ‡æ­£å¸¸</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#BABED8;">stats </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> get_performance_stats</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your_api_key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">analyze_performance_health</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your_api_key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">monitor_performance_thresholds</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your_api_key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><h2 id="æ€§èƒ½æŒ‡æ ‡è¯´æ˜" tabindex="-1">æ€§èƒ½æŒ‡æ ‡è¯´æ˜ <a class="header-anchor" href="#æ€§èƒ½æŒ‡æ ‡è¯´æ˜" aria-label="Permalink to â€œæ€§èƒ½æŒ‡æ ‡è¯´æ˜â€">â€‹</a></h2><h3 id="å…³é”®æ€§èƒ½æŒ‡æ ‡-kpi" tabindex="-1">å…³é”®æ€§èƒ½æŒ‡æ ‡ (KPI) <a class="header-anchor" href="#å…³é”®æ€§èƒ½æŒ‡æ ‡-kpi" aria-label="Permalink to â€œå…³é”®æ€§èƒ½æŒ‡æ ‡ (KPI)â€">â€‹</a></h3><h4 id="è¿æ¥ç›¸å…³" tabindex="-1">è¿æ¥ç›¸å…³ <a class="header-anchor" href="#è¿æ¥ç›¸å…³" aria-label="Permalink to â€œè¿æ¥ç›¸å…³â€">â€‹</a></h4><ul><li><strong>è¿æ¥ä½¿ç”¨ç‡</strong>: å½“å‰è¿æ¥æ•° / æœ€å¤§è¿æ¥æ•° Ã— 100%</li><li><strong>çº¿ç¨‹è¿è¡Œæ•°</strong>: åæ˜ å½“å‰ç³»ç»Ÿè´Ÿè½½</li><li><strong>çº¿ç¨‹åˆ›å»ºæ•°</strong>: å†å²åˆ›å»ºçš„çº¿ç¨‹æ€»æ•°</li></ul><h4 id="æŸ¥è¯¢ç›¸å…³" tabindex="-1">æŸ¥è¯¢ç›¸å…³ <a class="header-anchor" href="#æŸ¥è¯¢ç›¸å…³" aria-label="Permalink to â€œæŸ¥è¯¢ç›¸å…³â€">â€‹</a></h4><ul><li><strong>QPS (Queries Per Second)</strong>: æ¯ç§’æŸ¥è¯¢æ•°</li><li><strong>æ…¢æŸ¥è¯¢ç‡</strong>: æ…¢æŸ¥è¯¢å æ€»æŸ¥è¯¢çš„æ¯”ä¾‹</li><li><strong>æŸ¥è¯¢ç±»å‹åˆ†å¸ƒ</strong>: äº†è§£ä¸šåŠ¡è´Ÿè½½ç‰¹å¾</li></ul><h4 id="ç¼“å­˜ç›¸å…³" tabindex="-1">ç¼“å­˜ç›¸å…³ <a class="header-anchor" href="#ç¼“å­˜ç›¸å…³" aria-label="Permalink to â€œç¼“å­˜ç›¸å…³â€">â€‹</a></h4><ul><li><strong>ç¼“å†²æ± å‘½ä¸­ç‡</strong>: InnoDB ç¼“å†²æ± çš„ç¼“å­˜æ•ˆç‡</li><li><strong>è¡¨ç¼“å­˜æ•ˆç‡</strong>: è¡¨æ‰“å¼€å’Œé”ç­‰å¾…æƒ…å†µ</li></ul><h2 id="æ€§èƒ½ç›‘æ§å·¥å…·" tabindex="-1">æ€§èƒ½ç›‘æ§å·¥å…· <a class="header-anchor" href="#æ€§èƒ½ç›‘æ§å·¥å…·" aria-label="Permalink to â€œæ€§èƒ½ç›‘æ§å·¥å…·â€">â€‹</a></h2><h3 id="å®æ—¶æ€§èƒ½ä»ªè¡¨æ¿" tabindex="-1">å®æ—¶æ€§èƒ½ä»ªè¡¨æ¿ <a class="header-anchor" href="#å®æ—¶æ€§èƒ½ä»ªè¡¨æ¿" aria-label="Permalink to â€œå®æ—¶æ€§èƒ½ä»ªè¡¨æ¿â€">â€‹</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> create_performance_dashboard</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> refresh_interval</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">åˆ›å»ºå®æ—¶æ€§èƒ½ä»ªè¡¨æ¿</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    import</span><span style="color:#BABED8;"> time</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    import</span><span style="color:#BABED8;"> os</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    while</span><span style="color:#89DDFF;"> True:</span></span>
<span class="line"><span style="color:#BABED8;">        os</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">system</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clear</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#676E95;font-style:italic;">  # æ¸…å±</span></span>
<span class="line"><span style="color:#BABED8;">        stats </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> get_performance_stats</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ğŸ–¥ï¸  å®æ—¶æ€§èƒ½ä»ªè¡¨æ¿</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> *</span><span style="color:#F78C6C;"> 60</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;æ›´æ–°æ—¶é—´: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">timestamp</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;å¥åº·çŠ¶æ€: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">performance_health</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">].</span><span style="color:#82AAFF;">upper</span><span style="color:#89DDFF;">()</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # è¿æ¥çŠ¶æ€</span></span>
<span class="line"><span style="color:#BABED8;">        conn </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">connection_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">ğŸ”— è¿æ¥: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">conn</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">threads_connected</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;"> / </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">conn</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">max_used_connections</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;"> (</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">conn</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">connection_usage_percent</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">%)&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # æŸ¥è¯¢çŠ¶æ€</span></span>
<span class="line"><span style="color:#BABED8;">        query </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">query_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;ğŸ“Š QPS: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">query</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">queries_per_second</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;"> | æ…¢æŸ¥è¯¢: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">query</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">slow_queries</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # ç¼“å†²æ± çŠ¶æ€</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">innodb_available</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#BABED8;">            buffer </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">buffer_pool</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#82AAFF;">            print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;ğŸ’¾ ç¼“å†²æ± : </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">buffer</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">buffer_pool_hit_rate</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">% å‘½ä¸­ç‡&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">â° ä¸‹æ¬¡æ›´æ–°: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">refresh_interval</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">ç§’å...&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">refresh_interval</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨ç¤ºä¾‹ï¼ˆè°¨æ…ä½¿ç”¨ï¼Œä¼šæŒç»­è¿è¡Œï¼‰</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># create_performance_dashboard(&quot;your_api_key&quot;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="æ€§èƒ½è¶‹åŠ¿åˆ†æ" tabindex="-1">æ€§èƒ½è¶‹åŠ¿åˆ†æ <a class="header-anchor" href="#æ€§èƒ½è¶‹åŠ¿åˆ†æ" aria-label="Permalink to â€œæ€§èƒ½è¶‹åŠ¿åˆ†æâ€">â€‹</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> track_performance_trends</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> duration_minutes</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">è·Ÿè¸ªæ€§èƒ½è¶‹åŠ¿</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    import</span><span style="color:#BABED8;"> time</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    from</span><span style="color:#BABED8;"> collections </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> deque</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # å­˜å‚¨å†å²æ•°æ®</span></span>
<span class="line"><span style="color:#BABED8;">    qps_history </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> deque</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">maxlen</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">60</span><span style="color:#89DDFF;">)</span><span style="color:#676E95;font-style:italic;">  # ä¿ç•™æœ€è¿‘60ä¸ªæ•°æ®ç‚¹</span></span>
<span class="line"><span style="color:#BABED8;">    connection_history </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> deque</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">maxlen</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">60</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#BABED8;">    start_time </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">time</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    while</span><span style="color:#BABED8;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">time</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;"> -</span><span style="color:#BABED8;"> start_time </span><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;"> duration_minutes </span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;"> 60</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        stats </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> get_performance_stats</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#BABED8;">        qps </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">query_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">queries_per_second</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">        connections </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">connection_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">threads_connected</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#BABED8;">        qps_history</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">qps</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        connection_history</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">connections</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # è®¡ç®—è¶‹åŠ¿</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">qps_history</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> &gt;</span><span style="color:#F78C6C;"> 1</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">            qps_trend </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">â†‘</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;font-style:italic;"> if</span><span style="color:#BABED8;"> qps_history</span><span style="color:#89DDFF;">[-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> &gt;</span><span style="color:#BABED8;"> qps_history</span><span style="color:#89DDFF;">[-</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">â†“</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">            conn_trend </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">â†‘</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;font-style:italic;"> if</span><span style="color:#BABED8;"> connection_history</span><span style="color:#89DDFF;">[-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> &gt;</span><span style="color:#BABED8;"> connection_history</span><span style="color:#89DDFF;">[-</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">â†“</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">            qps_trend </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">â†’</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">            conn_trend </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">â†’</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;QPS: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">qps</span><span style="color:#C792EA;">:.1f</span><span style="color:#F78C6C;">}</span><span style="color:#F78C6C;"> {</span><span style="color:#82AAFF;">qps_trend</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;"> | è¿æ¥: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">connections</span><span style="color:#F78C6C;">}</span><span style="color:#F78C6C;"> {</span><span style="color:#82AAFF;">conn_trend</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#BABED8;">        time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">)</span><span style="color:#676E95;font-style:italic;">  # æ¯10ç§’æ›´æ–°ä¸€æ¬¡</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # ç”Ÿæˆè¶‹åŠ¿æŠ¥å‘Š</span></span>
<span class="line"><span style="color:#BABED8;">    avg_qps </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> sum</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">qps_history</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> /</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">qps_history</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    max_connections </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> max</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">connection_history</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">ğŸ“ˆ </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">duration_minutes</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">åˆ†é’Ÿæ€§èƒ½è¶‹åŠ¿:&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   å¹³å‡ QPS: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">avg_qps</span><span style="color:#C792EA;">:.1f</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   æœ€å¤§è¿æ¥æ•°: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">max_connections</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   QPS èŒƒå›´: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">min</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">qps_history</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">:.1f</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;"> - </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">max</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">qps_history</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">:.1f</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#82AAFF;">track_performance_trends</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your_api_key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> duration_minutes</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="æ€§èƒ½åŸºå‡†æµ‹è¯•" tabindex="-1">æ€§èƒ½åŸºå‡†æµ‹è¯• <a class="header-anchor" href="#æ€§èƒ½åŸºå‡†æµ‹è¯•" aria-label="Permalink to â€œæ€§èƒ½åŸºå‡†æµ‹è¯•â€">â€‹</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> performance_benchmark</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">api_key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> expected_metrics</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">æ€§èƒ½åŸºå‡†æµ‹è¯•</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    stats </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> get_performance_stats</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">api_key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#BABED8;">    benchmarks </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">connection_usage</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">connection_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">connection_usage_percent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> &lt;</span><span style="color:#F78C6C;"> 70</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">slow_queries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">query_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">slow_queries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> &lt;</span><span style="color:#F78C6C;"> 5</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">buffer_hit_rate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">buffer_pool</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">buffer_pool_hit_rate</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> &gt;</span><span style="color:#F78C6C;"> 98</span><span style="color:#89DDFF;font-style:italic;"> if</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">innodb_available</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;"> True,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">qps</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> stats</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">query_stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">queries_per_second</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> &gt;</span><span style="color:#BABED8;"> expected_metrics</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">min_qps</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;"> 50</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ğŸ¯ æ€§èƒ½åŸºå‡†æµ‹è¯•ç»“æœ:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    passed </span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;"> 0</span></span>
<span class="line"><span style="color:#BABED8;">    total </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">benchmarks</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    for</span><span style="color:#BABED8;"> test</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> benchmarks</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">items</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">        status </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">âœ…</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;font-style:italic;"> if</span><span style="color:#BABED8;"> result </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">âŒ</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;   </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">status</span><span style="color:#F78C6C;">}</span><span style="color:#F78C6C;"> {</span><span style="color:#82AAFF;">test</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">: </span><span style="color:#F78C6C;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">é€šè¿‡</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;font-style:italic;"> if</span><span style="color:#82AAFF;"> result </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">æœªé€šè¿‡</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">            passed </span><span style="color:#89DDFF;">+=</span><span style="color:#F78C6C;"> 1</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#BABED8;">    score </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;">passed </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;"> total</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> *</span><span style="color:#F78C6C;"> 100</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">ğŸ“Š åŸºå‡†æµ‹è¯•å¾—åˆ†: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">score</span><span style="color:#C792EA;">:.1f</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">%&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#BABED8;"> score </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F78C6C;"> 80</span><span style="color:#676E95;font-style:italic;">  # 80%ä»¥ä¸Šè®¤ä¸ºé€šè¿‡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#BABED8;">expected </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">min_qps</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 100</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#82AAFF;"> performance_benchmark</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your_api_key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> expected</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ğŸ‰ æ€§èƒ½åŸºå‡†æµ‹è¯•é€šè¿‡!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">âš ï¸  æ€§èƒ½åŸºå‡†æµ‹è¯•æœªé€šè¿‡ï¼Œå»ºè®®ä¼˜åŒ–</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="å¥åº·çŠ¶æ€è¯´æ˜" tabindex="-1">å¥åº·çŠ¶æ€è¯´æ˜ <a class="header-anchor" href="#å¥åº·çŠ¶æ€è¯´æ˜" aria-label="Permalink to â€œå¥åº·çŠ¶æ€è¯´æ˜â€">â€‹</a></h2><h3 id="æ€§èƒ½å¥åº·ç­‰çº§" tabindex="-1">æ€§èƒ½å¥åº·ç­‰çº§ <a class="header-anchor" href="#æ€§èƒ½å¥åº·ç­‰çº§" aria-label="Permalink to â€œæ€§èƒ½å¥åº·ç­‰çº§â€">â€‹</a></h3><ul><li><strong>excellent</strong>: æ‰€æœ‰æŒ‡æ ‡ä¼˜ç§€</li><li><strong>good</strong>: å¤§éƒ¨åˆ†æŒ‡æ ‡è‰¯å¥½</li><li><strong>fair</strong>: éƒ¨åˆ†æŒ‡æ ‡éœ€è¦å…³æ³¨</li><li><strong>poor</strong>: å¤šä¸ªæŒ‡æ ‡å­˜åœ¨é—®é¢˜</li><li><strong>critical</strong>: ä¸¥é‡æ€§èƒ½é—®é¢˜</li></ul><h2 id="ç›¸å…³é“¾æ¥" tabindex="-1">ç›¸å…³é“¾æ¥ <a class="header-anchor" href="#ç›¸å…³é“¾æ¥" aria-label="Permalink to â€œç›¸å…³é“¾æ¥â€">â€‹</a></h2><ul><li><a href="./../monitoring-stats/">ç›‘æ§ç»Ÿè®¡æ€»è§ˆ</a></li><li><a href="./database-stats">æ•°æ®åº“ç»Ÿè®¡</a></li><li><a href="./query-analysis">æŸ¥è¯¢åˆ†æ</a></li><li><a href="./system-stats">ç³»ç»Ÿç»Ÿè®¡</a></li></ul>`,46))])}const E=p(F,[["render",D]]);export{A as __pageData,E as default};
