---
title: AI æ‰§è¡Œæ¥å£ (Beta)
beta: true
---

## ğŸ§ª AI æ‰§è¡Œæ¥å£ (Beta)

> **çŠ¶æ€ï¼šBeta**  
> æ­¤æ¥å£åœ¨æœåŠ¡ç«¯çœŸå®æ‰§è¡Œç”± AI è§„åˆ’å‡ºçš„æ¥å£è°ƒç”¨åºåˆ—ï¼Œé£é™©è¾ƒé«˜ï¼Œå»ºè®®åœ¨ä¸¥æ ¼æƒé™æ§åˆ¶å’Œå®¡è®¡å¼€å¯çš„å‰æä¸‹ï¼Œä»…ç”¨äºæµ‹è¯•æˆ–å—æ§åœºæ™¯ã€‚

### åŸºæœ¬ä¿¡æ¯

- **æ–¹æ³•**: `POST`
- **è·¯å¾„**: <ApiEndpoint method="POST" path="/ai/execute"/>
- **è®¤è¯**: éœ€è¦ç™»å½•ï¼ˆ`Authorization: Bearer <token>`ï¼‰

### åŠŸèƒ½è¯´æ˜

æ•´ä½“æµç¨‹ï¼š

1. å°†è¯·æ±‚ä½“ JSON äº¤ç»™å¤§æ¨¡å‹ï¼Œç”± AI ç”Ÿæˆä¸€ä»½ `plan`ï¼ˆè°ƒç”¨è®¡åˆ’ï¼‰ï¼Œå†…éƒ¨è°ƒç”¨é€»è¾‘ç­‰åŒäº `/ai/router`ï¼›
2. åœ¨ **å½“å‰ç”¨æˆ·èº«ä»½** ä¸‹ï¼ŒæŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œ `plan` ä¸­åˆ—å‡ºçš„å„ä¸ªæ¥å£è°ƒç”¨ï¼›
   - å¤ç”¨æœ¬æ¬¡è¯·æ±‚çš„ `Authorization` è¯·æ±‚å¤´ï¼›
   - æ‰€æœ‰åŸæœ‰çš„æƒé™æ ¡éªŒï¼ˆå¦‚ `@require_permission`ã€`@require_database_permission` ç­‰ï¼‰ç»§ç»­ç”Ÿæ•ˆï¼›
3. è¿”å›æ¯ä¸€æ­¥çš„å®é™…æ‰§è¡Œç»“æœåŠæ•´ä½“æ€»ç»“ä¿¡æ¯ã€‚

### è¯·æ±‚å‚æ•°

#### è¯·æ±‚ä½“ (JSON)

è¯·æ±‚ä½“åŒæ ·å¯ä»¥æ˜¯ä»»æ„åˆæ³• JSONï¼Œç”¨äºè¡¨è¾¾é«˜å±‚éœ€æ±‚ï¼Œä¾‹å¦‚ï¼š

```json
{
  "goal": "åœ¨ testdb.users æ’å…¥ä¸€æ¡ name=æå››, age=30 çš„æ•°æ®ï¼Œå¹¶è¿”å›æœ€æ–° 5 æ¡è®°å½•",
  "options": {
    "dry_run": false
  }
}
```

> **æ³¨æ„**ï¼š  
> - è¯·æ±‚ä½“ **ä¸èƒ½ä¸ºç©º**ï¼Œå¦åˆ™è¿”å› `400`ã€‚  
> - è¯·æ±‚ä½“å†…å®¹ä¼šè¢«æˆªæ–­åå†™å…¥å®¡è®¡æ—¥å¿—ï¼ˆæœ€å¤šçº¦ 1000 å­—ç¬¦ï¼‰ï¼Œä¾¿äºè¿½è¸ªã€‚

### å“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "model": "gpt-4.1-mini",
  "plan": {
    "actions": [
      {
        "name": "insert_user",
        "method": "POST",
        "path": "/database/testdb/table/users/data",
        "body": {
          "name": "æå››",
          "age": 30
        }
      },
      {
        "name": "query_latest_users",
        "method": "GET",
        "path": "/database/testdb/table/users/data",
        "params": {
          "order_by": "created_at desc",
          "limit": 5
        }
      }
    ]
  },
  "executed": [
    {
      "name": "insert_user",
      "status": 200,
      "response": {
        "success": true,
        "insert_id": 123
      }
    },
    {
      "name": "query_latest_users",
      "status": 200,
      "response": {
        "success": true,
        "data": [
          { "id": 123, "name": "æå››", "age": 30 }
        ]
      }
    }
  ],
  "comment": "æˆåŠŸæ’å…¥ä¸€æ¡ç”¨æˆ·è®°å½•å¹¶è¿”å›æœ€æ–° 5 æ¡ã€‚"
}
```

### å“åº”å­—æ®µè¯´æ˜

- **success**: `boolean`ï¼Œæ•´ä½“æ‰§è¡Œæ˜¯å¦æˆåŠŸï¼ˆé€šå¸¸ç”±å„æ­¥éª¤ç»“æœç»¼åˆåˆ¤æ–­ï¼‰ã€‚
- **model**: `string`ï¼Œä½¿ç”¨çš„å¤§æ¨¡å‹æ ‡è¯†ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚
- **plan**: `object`ï¼ŒAI ç”Ÿæˆçš„è°ƒç”¨è®¡åˆ’ï¼ˆå’Œ `/ai/router` è¿”å›ç»“æ„ä¸€è‡´æˆ–ç›¸è¿‘ï¼‰ã€‚
- **executed**: `array`ï¼ŒæŒ‰é¡ºåºåˆ—å‡ºæ¯ä¸€æ­¥å®é™…æ‰§è¡Œçš„ç»“æœï¼š
  - `name`: æ­¥éª¤åç§°ï¼›
  - `status`: HTTP çŠ¶æ€ç ï¼›
  - `response`: å¯¹åº”æ¥å£çš„å“åº”ä½“ã€‚
- **comment**: `string`ï¼ŒAI æˆ–æ‰§è¡Œå™¨ç»™å‡ºçš„æ•´ä½“è¯´æ˜/æ€»ç»“ã€‚
- **error**: `string`ï¼Œå½“ `success=false` æ—¶çš„é”™è¯¯ä¿¡æ¯ã€‚

### å®‰å…¨ä¸æƒé™

- æ‰€æœ‰å®é™…è°ƒç”¨éƒ½åœ¨å½“å‰è¯·æ±‚ç”¨æˆ·çš„æƒé™èŒƒå›´å†…æ‰§è¡Œï¼›
- å¦‚æŸä¸€æ­¥å‘½ä¸­æƒé™ä¸è¶³ã€å‚æ•°é”™è¯¯ç­‰ï¼Œå¯èƒ½å¯¼è‡´æ•´ä½“ `success=false`ï¼Œä½†éƒ¨åˆ† `executed` æ­¥éª¤å·²ç»å®Œæˆï¼›
- å»ºè®®ç»“åˆæ•°æ®åº“å¤‡ä»½/åªè¯»è´¦å·ã€å®¡è®¡æ—¥å¿—ç­‰æ‰‹æ®µï¼Œé™ä½è¯¯æ“ä½œé£é™©ã€‚

### å¯èƒ½çš„é”™è¯¯

- `400`ï¼šè¯·æ±‚ä½“ä¸ºç©ºæˆ–ä¸æ˜¯åˆæ³• JSONã€‚
- `500`ï¼šAI è·¯ç”±é…ç½®é”™è¯¯ï¼ˆ`AiRouterError`ï¼‰æˆ–å¤§æ¨¡å‹/åç«¯è°ƒç”¨å¼‚å¸¸ã€‚


